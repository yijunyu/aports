# Maintainer: Yijun Yu <y.yu@open.ac.uk>
pkgname=antlr4
pkgver=4.7.2
pkgrel=0
pkgdesc="ANother Tool for Language Recognition"
url="http://www.antlr.org/"
arch="all"
license="BSD"
depends="util-linux"
makedepends="util-linux-dev"
subpackages="$pkgname-dev"
source="antlr-4.7.2-complete.jar::http://www.antlr.org/download/antlr-4.7.2-complete.jar
	antlr4-cpp-runtime-4.7.2-source.zip::http://www.antlr.org/download/antlr4-cpp-runtime-4.7.2-source.zip"
builddir="$srcdir"
options="!check"
build() {
	cd "$builddir"
	sed -i -e '/CMP0059/d' CMakeLists.txt
	cmake . -DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=Release
	make -j 8
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
        install -c -m 644 antlr-4.7.2-complete.jar "$pkgdir"/usr/lib/antlr-4.7.2-complete.jar
}

sha512sums="e788d28796c8925a158f0a09048590bdcf6730d46dcb8a12b362cbcc80a7ceb76374b2675987c953faecd3cf4a847b1571485a71081a84684170d25d05176a11  antlr-4.7.2-complete.jar
3298b83a06ddd8d8852462401e46fe2eb83d20af4ba14c722cb31b33d929d1c5a4ffb694ee084495a4ae26ed3246b6781ca6045d11253c94efc09729fa001090  antlr4-cpp-runtime-4.7.2-source.zip"
