# Maintainer: Yijun Yu <y.yu@open.ac.uk>
pkgname=antlr4-runtime
pkgver=4.7.2
pkgrel=0
pkgdesc="ANTLR4 C++ Runtime"
url="https://github.com/antlr/antlr4"
arch="all"
license="BSD"
depends="openjdk8"
install=""
source="v$pkgver.tar.gz::https://github.com/antlr/antlr4/archive/$pkgver.tar.gz"
builddir="$srcdir"
options="!check !fhs"
build() {
       cd "$builddir"
       mkdir -p bld
       cd bld
       cmake -G Ninja ../antlr4-4.7.2/runtime/Cpp
       ninja
       cd ..
}

package() {
	echo "startdir = $startdir"
	echo "abuild_path = $abuild_path"
	echo "pkdir = $pkgdir"
	echo "current folder = $(pwd)"
        mkdir -p "$pkgdir"/usr/lib
	find . -name "*.so*" | while read f; do
	  cp $f "$pkgdir"/usr/lib/
        done
	find . -name "*.a" | while read f; do
	  cp $f "$pkgdir"/usr/lib/
        done
	mkdir -p "$pkgdir"/usr/include/antlr4-runtime
	cp -r antlr4-4.7.2/runtime/Cpp/runtime/src/* "$pkgdir"/usr/include/antlr4-runtime/
}
sha512sums="dc8e0f1e98e6ba9a996c6db553adbf081ec6b5693fc555f3da18b2782bb9489baff3e15d7b284da5abddc88a8af6d78f66ac2bd82d2425f1e1b0924e09217c26  v4.7.2.tar.gz"
