# Maintainer: Yijun Yu <y.yu@open.ac.uk>
pkgname=fast
pkgver=0.0.8
pkgrel=0
pkgdesc="Flat Abstract Syntax Tree"
url="https://github.com/f-ast/fast"
arch="all"
license="BSD"
depends="srcml srcSlice protobuf flatbuffers antlr4 openjdk8 coreutils libgit2"
depends_dev="srcml-dev srcSlice-dev protobuf flatbuffers-dev sqlite-dev libgit2-dev"
install=""
source="fast-$pkgver.tar.bz2::http://docker.for.mac.localhost:8080/v$pkgver.tar.bz2"
#subpackages="$pkgname-dev"
builddir="$srcdir"
options="!check !fhs"
build() {
        cd "$builddir"
	ln -s ../.git .
	mkdir -p bld
        cd bld
        cmake -G Ninja ../src
	ninja -v
}

package() {
        cd "bld"
        echo "$(pwd)"
        echo "$pkgdir"
        mkdir -p "$pkgdir"/usr/bin
        cp bin/headfast "$pkgdir"/usr/bin/fast
        mkdir -p "$pkgdir"/usr/share
        cp fast.proto "$pkgdir"/usr/share
}
sha512sums="e14751c98ad13bd9334b87c6264d04c0bc8e9fbb59bb665ce97e31227122d33894b1b6703b43cdda846db31672ecff4fcbded9e02942b429b384324d266dd9ad  fast-0.0.8.tar.bz2"
